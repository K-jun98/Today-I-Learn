
## 📚 TIL

---

### `개인 공부`
- [X] 테스트 주도 개발 시작하기 5~7장
- [X] 자바 ORM 표준 JPA 프로그래밍 - 기본편 섹션7, 섹션8
- [ ] [우아한객체지향 by 우아한형제들 개발실장 조영호님](https://www.youtube.com/watch?v=dJ5C4qRqAgA)
- [ ] [아티클](https://velog.io/@city7310/%EC%A3%BC%EB%8B%88%EC%96%B4%EB%A1%9C-1%EB%85%84-%EC%9D%BC%ED%95%98%EA%B3%A0-%EB%8A%90%EB%82%80-%EA%B2%83%EB%93%A4)

---
### `짧은 정리`

### `JPA 상속관계 매핑`

- 관계형 데이터베이스는 상속 관계X
- `슈퍼타입 서브타입 관계`라는 모델링 기법이 객체 상속과 유사
- 상속관계 매핑: 객체의 상속과 구조와 DB의 슈퍼타입 서브타입 관계를 매핑

### `상곡관계 매핑`
- 슈퍼타입 서브타입 논리 모델을 실제 물리 모델로 구현하는 방법
  - `조인 전략`: 테이블을 조인해서 조회
  - `단일 테이블 전략`: 통합 테이블로 변환해서 사용
  - `구현 클래스마다 테이블 전략`: 서브타입마다 테이블을 만들어 사용
`JPA 에서 기본 적략으로는 단일 테이블 전략을 사용해 하나의 테이블에서 관리함`

### `JPA를 사용할때 EAGER 보다 LAZY를 선호하는 이유`
- `EAGER`는 `JOIN`을 사용해서 한번에 조회하기 때문에 성능상 이슈가 발생할 수 있음
- `LAZY`는 `JOIN`을 사용하지 않고 필요할 때 조회하기 때문에 성능상 이점이 있음.
- `EAGER`로딩을 사용하면 연관된 모든 엔티티를 가져오기 때문에, 예상하지 못한 쿼리가 발생할 수 있음
- 하지만 연관된 엔티티를 사용하느 시점이 빈번하거나, 연관된 엔티티가 매우 작을 경우 `EAGER`로딩을 사용해도 무방함

### `CASCADE를 사용할때 주의할 점`
- `CASCADE`는 연관된 엔티티를 영속화, 수정, 삭제할 때 사용
- 부적절한 CASCADE 설정으로 인한 문제
  - 예를 들어, CascadeType.REMOVE를 설정하면 부모 엔티티를 삭제할 때 자식 엔티티도 함께 삭제되는데, 이때 실수로 삭제하면 안 되는 자식 엔티티가 함께 삭제될 수 있습니다.
- 연관된 엔티티들 간의 순환 참조
  - 예를 들어, 부모 엔티티와 자식 엔티티 간에 양방향 관계가 설정되어 있고, CascadeType.ALL로 설정되어 있다면, 부모 엔티티를 저장할 때 자식 엔티티를 저장하고, 자식 엔티티를 저장할 때 부모 엔티티를 다시 저장하면서 무한 루프에 빠질 수 있습니다.
- `CASCADE를 사용할 때는 올바른 설정을 해야하고, 순환 참조를 방지하며, 성능 문제에 대한 고려도 필요합니다.`


### `CASCADE=REMOVE 와 orphanRemoval = true 의 차이`
- CASCADE=REMOVE
  이 옵션을 설정하면 부모 엔티티의 삭제 작업이 자식 엔티티의 삭제 작업까지 전파되어 자식 엔티티가 모두 삭제됩니다. 
- orphanRemoval=true
  - 이 옵션을 설정하면 부모 엔티티에서 자식 엔티티를 참조하는 필드에서 자식 엔티티를 제거하면 자식 엔티티가 자동으로 삭제됩니다. 
